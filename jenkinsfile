pipeline{
  agent any
  triggers {
  cron('0 06 * * *')
  }
  stages{
    stage("code checkout"){
      steps{
      bat "echo hello"
      }
    }
    stage("code build"){
        steps{
          bat "mvn clean"
        }
      }  
       stage("code test"){
          steps{
          bat "mvn test"
        }
      }
      stage("Publish to Artifactory"){
        steps{
              rtMavenDeployer(
                  id: 'deployer',
                  serverId:'nagp@govinda',
                  releaseRepo:'govinda1988',
                  snapshotRepo:'govinda1988',
                )
              rtMavenRun(
                  pom: 'pom.xml',
                  goals:'',
                  deployerId:'deployer'
              )
              rtPublishBuildInfo(
                  serverId:'nagp@govinda',
              )
            }
              
      }
      
      
}

}
  post {
    success{
        bat "echo success"
            }
      }

  
